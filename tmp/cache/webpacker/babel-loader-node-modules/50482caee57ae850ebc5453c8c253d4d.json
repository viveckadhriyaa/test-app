{"ast":null,"code":"var current_request, get_paginated_list;\ncurrent_request = null;\n\nget_override_paginated_list = function get_override_paginated_list(page, thisObj) {\n  var filter_params, query_string, sort_column, sort_direction, success_replace_class, url;\n  url = $('.filters').data('filter-url');\n  success_replace_class = $('.filters').data('replacement-class');\n  all_selected = $('[data-behaviour=\"select-all-part-invoice\"]').prop('checked');\n\n  if (typeof page === void 0) {\n    page = 1;\n  }\n\n  if (thisObj.data('behaviour') === \"sort\") {\n    sort_column = thisObj.data('sort-column');\n    sort_direction = thisObj.data('sort-direction');\n  } else {\n    sort_column = $('[data-behaviour=\"current-page\"]').data('sort-column');\n    sort_direction = $('[data-behaviour=\"current-page\"]').data('sort-direction');\n  }\n\n  filter_params = {};\n  $('[data-behaviour=\"filter\"]').each(function (index) {\n    filter_params[$(this).data('scope')] = $(this).val();\n  });\n  query_string = {\n    filters: filter_params,\n    page: page,\n    sort: {\n      sort_column: sort_column,\n      sort_direction: sort_direction\n    }\n  };\n  return current_request = $.ajax(url, {\n    type: 'GET',\n    data: query_string,\n    beforeSend: function beforeSend() {\n      if (current_request !== null) {\n        current_request.abort();\n      }\n    },\n    success: function success(data) {\n      var q;\n      q = jQuery.param(query_string);\n      window.history.pushState(\"\", \"\", url + \"?\" + q);\n      $('.' + success_replace_class).html(data);\n\n      if (localStorage.getItem(\"export_ids\") != \"\" && localStorage.getItem(\"export_ids\") != null) {\n        selected_ids = JSON.parse(localStorage.getItem(\"export_ids\"));\n        $('[data-behaviour=\"select-part-invoice\"]').each(function (index) {\n          if (selected_ids.indexOf($(this).data(\"id\")) > -1) {\n            $(this).prop('checked', true);\n          }\n        });\n\n        if (all_selected) {\n          $('[data-behaviour=\"select-all-part-invoice\"]').prop('checked', true);\n        }\n\n        $('.export_btn').removeClass('hidden');\n      }\n\n      return;\n    },\n    error: function error(jqxhr, textStatus, errorThrown) {\n      console.log(errorThrown, textStatus);\n    }\n  });\n};\n\n$(document).on('click', '[data-behaviour=\"next-page-override\"]', function () {\n  var current_page, thisObj;\n  thisObj = $(this);\n  current_page = parseInt($('[data-behaviour=\"current-page\"]').data('page'));\n  return $(function () {\n    return get_override_paginated_list(current_page + 1, thisObj);\n  });\n});\n$(document).on('click', '[data-behaviour=\"previous-page-override\"]', function () {\n  var current_page, thisObj;\n  thisObj = $(this);\n  current_page = parseInt($('[data-behaviour=\"current-page\"]').data('page'));\n  return $(function () {\n    return get_override_paginated_list(current_page - 1, thisObj);\n  });\n});\n$(document).on('keyup', '[data-type=\"input-filter\"]', function () {\n  var thisObj;\n  thisObj = $(this);\n  localStorage.setItem(\"export_ids\", '');\n  return $(function () {\n    return get_override_paginated_list(1, thisObj);\n  });\n});\n$(document).on('change', '[data-type=\"select-filter\"]', function () {\n  var thisObj;\n  thisObj = $(this);\n  localStorage.setItem(\"export_ids\", '');\n  return $(function () {\n    return get_override_paginated_list(1, thisObj);\n  });\n});\n$(document).on('click', '[data-type=\"anchor-filter\"]', function () {\n  var thisObj;\n  thisObj = $(this);\n  localStorage.setItem(\"export_ids\", '');\n  return $(function () {\n    return get_override_paginated_list(1, thisObj);\n  });\n});","map":{"version":3,"sources":["/home/viveck/cwork/graphql-app/app/javascript/application/javascripts/spotlight_search.js"],"names":["current_request","get_paginated_list","get_override_paginated_list","page","thisObj","filter_params","query_string","sort_column","sort_direction","success_replace_class","url","$","data","all_selected","prop","each","index","val","filters","sort","ajax","type","beforeSend","abort","success","q","jQuery","param","window","history","pushState","html","localStorage","getItem","selected_ids","JSON","parse","indexOf","removeClass","error","jqxhr","textStatus","errorThrown","console","log","document","on","current_page","parseInt","setItem"],"mappings":"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","sourcesContent":["var current_request, get_paginated_list;\ncurrent_request = null;\n\nget_override_paginated_list = function(page, thisObj) {\n  var filter_params, query_string, sort_column, sort_direction, success_replace_class, url;\n  url = $('.filters').data('filter-url');\n  success_replace_class = $('.filters').data('replacement-class');\n  all_selected = $('[data-behaviour=\"select-all-part-invoice\"]').prop('checked')\n  if (typeof page === void 0) {\n    page = 1;\n  }\n  if (thisObj.data('behaviour') === \"sort\") {\n    sort_column = thisObj.data('sort-column');\n    sort_direction = thisObj.data('sort-direction');\n  } else {\n    sort_column = $('[data-behaviour=\"current-page\"]').data('sort-column');\n    sort_direction = $('[data-behaviour=\"current-page\"]').data('sort-direction');\n  }\n  filter_params = {};\n  $('[data-behaviour=\"filter\"]').each(function(index) {\n    filter_params[$(this).data('scope')] = $(this).val();\n  });\n  query_string = {\n    filters: filter_params,\n    page: page,\n    sort: {\n      sort_column: sort_column,\n      sort_direction: sort_direction\n    }\n  };\n  return current_request = $.ajax(url, {\n    type: 'GET',\n    data: query_string,\n    beforeSend: function() {\n      if (current_request !== null) {\n        current_request.abort();\n      }\n    },\n    success: function(data) {\n      var q;\n      q = jQuery.param(query_string);\n      window.history.pushState(\"\", \"\", url + \"?\" + q);\n      $('.' + success_replace_class).html(data);\n      if (localStorage.getItem(\"export_ids\") != \"\" && localStorage.getItem(\"export_ids\") != null) {\n        selected_ids = JSON.parse(localStorage.getItem(\"export_ids\"));\n        $('[data-behaviour=\"select-part-invoice\"]').each(function(index) {\n          if (selected_ids.indexOf($(this).data(\"id\")) > -1)\n            {\n              $(this).prop('checked', true);\n            }\n        });\n        if (all_selected) {\n          $('[data-behaviour=\"select-all-part-invoice\"]').prop('checked', true);\n        }\n        $('.export_btn').removeClass('hidden');\n      }\n      return\n    },\n    error: function(jqxhr, textStatus, errorThrown) {\n      console.log(errorThrown, textStatus);\n    }\n  });\n};\n\n$(document).on('click', '[data-behaviour=\"next-page-override\"]', function() {\n  var current_page, thisObj;\n  thisObj = $(this);\n  current_page = parseInt($('[data-behaviour=\"current-page\"]').data('page'));\n  return $(function() {\n    return get_override_paginated_list(current_page + 1, thisObj);\n  });\n});\n\n$(document).on('click', '[data-behaviour=\"previous-page-override\"]', function() {\n  var current_page, thisObj;\n  thisObj = $(this);\n  current_page = parseInt($('[data-behaviour=\"current-page\"]').data('page'));\n  return $(function() {\n    return get_override_paginated_list(current_page - 1, thisObj);\n  });\n});\n\n$(document).on('keyup', '[data-type=\"input-filter\"]', function() {\n  var thisObj;\n  thisObj = $(this);\n  localStorage.setItem(\"export_ids\", '');\n  return $(function() {\n    return get_override_paginated_list(1, thisObj);\n  });\n});\n\n$(document).on('change', '[data-type=\"select-filter\"]', function() {\n  var thisObj;\n  thisObj = $(this);\n  localStorage.setItem(\"export_ids\", '');\n  return $(function() {\n    return get_override_paginated_list(1, thisObj);\n  });\n});\n\n$(document).on('click', '[data-type=\"anchor-filter\"]', function() {\n  var thisObj;\n  thisObj = $(this);\n  localStorage.setItem(\"export_ids\", '');\n  return $(function() {\n    return get_override_paginated_list(1, thisObj);\n  });\n});\n"]},"metadata":{},"sourceType":"module"}